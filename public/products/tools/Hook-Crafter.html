<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hook Generator — ReuxMarketing</title>
    
    <!-- ReuxMarketing Official Style Guide -->
    <style>
        /* === ReuxMarketing Official Style Guide === */

        /* --- Core Variables & Body --- */
        :root {
            --bg-main: #0a0a0a;
            --bg-card: #1a1a1a;
            --text-primary: #f0f0f0;
            --text-secondary: #c7c7c7; /* For less emphasis */
            --accent-gold: #FFD700;
            --accent-green: #22c55e;
            --border-color: #444;
            --nav-blur-bg: rgba(10, 10, 10, 0.8);
            --font-main: 'Inter', sans-serif;
        }
        body {
            font-family: var(--font-main);
            background-color: var(--bg-main);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Reusable Components --- */
        .gold-text { color: var(--accent-gold); }
        .cta-btn {
            background-color: var(--accent-green);
            color: #0a0a0a; /* Dark text for contrast on green button */
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            text-decoration: none;
        }
        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.3);
        }
        .input-field {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
            width: 100%;
        }
        .input-field:focus {
            outline: none;
            border-color: var(--accent-gold);
        }
        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            overflow: hidden;
        }

        /* --- Main Header --- */
        .main-header {
            text-align: center;
            padding: 2.5rem 1rem;
            border-bottom: 1px solid #2a2a2a;
        }
        .main-header .brand-logo {
            font-weight: 900;
            font-size: 2.5rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        .main-header .tool-title {
            font-size: 1.25rem;
            color: var(--text-secondary);
        }

        /* --- Cross-Tool Navigation Menu --- */
        #tool-navigator {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: var(--nav-blur-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #2a2a2a;
        }
        #tool-navigator .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-cta-link {
            color: var(--accent-gold);
            font-weight: 700;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .nav-cta-link:hover {
            color: var(--text-primary);
        }
        .nav-tools-btn {
            background-color: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 0.4rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .nav-tools-btn:hover {
            border-color: var(--accent-gold);
            background-color: rgba(255, 215, 0, 0.1);
            color: var(--accent-gold);
        }

        /* --- Footer --- */
        .main-footer {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
            border-top: 1px solid #2a2a2a;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* Add any page-specific, minor style tweaks here if absolutely necessary. */
        /* Original styles from Hook Generator, adapted for ReuxMarketing theme */
        .form-step { display: none; }
        .form-step-active { display: block; }
        .progress-bar-fill { transition: width 0.3s ease-in-out; }
        .hook-card { 
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; 
            background-color: var(--bg-card); /* Use brand color */
            border: 1px solid var(--border-color); /* Use brand color */
            color: var(--text-primary); /* Use brand color */
        }
        .hook-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .toast-notification {
            animation: toast-in 0.3s ease-out forwards, toast-out 0.3s ease-in 2.7s forwards;
        }
        @keyframes toast-in {
            from { bottom: -50px; opacity: 0; }
            to { bottom: 16px; opacity: 1; }
        }
        @keyframes toast-out {
            from { bottom: 16px; opacity: 1; }
            to { bottom: -50px; opacity: 0; }
        }
        /* Style for editable textarea to look like a p tag */
        .editable-hook {
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            width: 100%;
            resize: none;
            overflow-y: hidden;
            line-height: 1.5;
            color: inherit;
            font-size: inherit;
            font-family: inherit;
        }
        .editable-hook:focus {
            outline: none;
            box-shadow: none;
            background-color: rgba(255, 215, 0, 0.1); /* Light yellow focus */
            border-radius: 4px;
        }
        .favorite-star {
            cursor: pointer;
            transition: transform 0.2s, color 0.2s;
        }
        .favorite-star:hover {
            transform: scale(1.2);
        }
        .favorite-star.favorited {
            color: var(--accent-gold); /* Use brand color */
        }

        /* Adjustments for specific elements to match dark theme */
        #progress-text { color: var(--accent-gold); }
        #progress-bar { background-color: var(--accent-gold); }
        .emotion-btn { 
            border-color: var(--border-color); 
            color: var(--text-primary);
        }
        .emotion-btn:hover { border-color: var(--accent-gold); }
        .emotion-btn.bg-amber-100 { 
            background-color: rgba(255, 215, 0, 0.1); /* Gold tint */
            border-color: var(--accent-gold); 
        }
        .emotion-btn.border-amber-500 { border-color: var(--accent-gold); }
        #live-hook-preview { 
            background-color: var(--bg-card); 
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }
        .badge-blue-100 { background-color: rgba(0, 123, 255, 0.2); color: #007bff; }
        .badge-purple-100 { background-color: rgba(128, 0, 128, 0.2); color: #800080; }
        .badge-yellow-100 { background-color: rgba(255, 215, 0, 0.2); color: #FFD700; }
        .badge-red-100 { background-color: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .badge-pink-100 { background-color: rgba(232, 62, 140, 0.2); color: #e83e8c; }
        .badge-orange-100 { background-color: rgba(253, 126, 20, 0.2); color: #fd7e14; }
        .badge-indigo-100 { background-color: rgba(102, 16, 242, 0.2); color: #6610f2; }
        .badge-green-100 { background-color: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .badge-teal-100 { background-color: rgba(32, 201, 151, 0.2); color: #20c997; }
        .badge-gray-200 { background-color: rgba(108, 117, 125, 0.2); color: #6c757d; }
        .badge-red-200 { background-color: rgba(220, 53, 69, 0.3); color: #dc3545; }
        .badge-lime-100 { background-color: rgba(163, 230, 53, 0.2); color: #a3e635; }
        .badge-cyan-100 { background-color: rgba(23, 162, 184, 0.2); color: #17a2b8; }

        /* Specific button styling adjustments */
        #prev-btn { 
            background-color: var(--border-color); 
            color: var(--text-primary); 
        }
        #prev-btn:hover { background-color: #555; }
        #next-btn { 
            background-color: var(--accent-gold); 
            color: var(--bg-main); 
        }
        #next-btn:hover { background-color: #e6b800; }
        #submit-btn { 
            background-color: var(--accent-green); 
            color: var(--bg-main); 
        }
        #submit-btn:hover { background-color: #1e9e4f; }
        
        /* Result section buttons */
        #generate-more-btn { 
            background-color: var(--accent-gold); 
            color: var(--bg-main); 
        }
        #generate-more-btn:hover { background-color: #e6b800; }
        #copy-all-btn, #copy-favorites-btn { 
            background-color: #007bff; /* Blue for copy */
            color: white; 
        }
        #copy-all-btn:hover, #copy-favorites-btn:hover { background-color: #0056b3; }
        #download-hooks-btn { 
            background-color: var(--border-color); 
            color: var(--text-primary); 
        }
        #download-hooks-btn:hover { background-color: #555; }
        #download-pdf-btn { 
            background-color: #dc3545; /* Red for PDF */
            color: white; 
        }
        #download-pdf-btn:hover { background-color: #bd2130; }
        #ab-test-export-btn { 
            background-color: #6f42c1; /* Purple for A/B test */
            color: white; 
        }
        #ab-test-export-btn:hover { background-color: #5a32a3; }
        #start-over-btn { 
            background-color: var(--border-color); 
            color: var(--text-primary); 
        }
        #start-over-btn:hover { background-color: #555; }

        .toast-notification {
            background-color: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
    </style>
    <!-- jsPDF library for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-black">

    <header class="main-header">
        <div class="brand-logo">Reux<span class="gold-text">Marketing</span></div>
        <p class="tool-title">Craft Irresistible Hooks in 60 Seconds Flat</p>
    </header>

    <nav id="tool-navigator">
        <div class="nav-container">
            <a href="tools.html" class="nav-tools-btn">Back to Tools</a>
            <a href="index.html" class="nav-cta-link">Explore The Marketing With Me &rarr;</a>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto px-4 py-12">
        <!-- Main content from the original Hook Generator tool -->
        <div id="app" class="card p-6 md:p-10">

            <!-- Progress Bar -->
            <div id="progress-container" class="mb-8">
                <div class="flex justify-between items-center mb-1">
                    <span class="text-sm font-medium" id="progress-text-label">Progress</span>
                    <span id="progress-text" class="text-xs md:text-sm font-medium">Step 1 of 4</span>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-2.5">
                    <div id="progress-bar" class="progress-bar-fill h-2.5 rounded-full" style="width: 25%;"></div>
                </div>
            </div>

            <!-- Form Steps -->
            <form id="hook-form">
                <!-- Steps 1-3 are unchanged -->
                <div id="step-1" class="form-step form-step-active">
                    <h2 class="text-2xl font-semibold mb-4 text-white">1. What’s the product or offer?</h2>
                    <p class="text-gray-400 mb-6">Describe what you're selling. Keywords: 'course', 'coaching', 'software', 'service'.</p>
                    <input type="text" id="product" class="input-field" placeholder="e.g. A 4-week program for creators">
                </div>
                <div id="step-2" class="form-step">
                    <h2 class="text-2xl font-semibold mb-4 text-white">2. Who is this for?</h2>
                    <p class="text-gray-400 mb-6">Be specific. Who are you trying to reach?</p>
                    <input type="text" id="audience" class="input-field" placeholder="e.g. New creators, fitness coaches, SaaS founders">
                </div>
                <div id="step-3" class="form-step">
                    <h2 class="text-2xl font-semibold mb-4 text-white">3. What's their biggest pain or fear?</h2>
                    <p class="text-gray-400 mb-6">What problem keeps them up at night?</p>
                    <select id="pain-select" class="input-field mb-4">
                        <option value="">-- Select a common pain point --</option>
                        <option value="Can’t get views/sales">Can’t get views/sales</option>
                        <option value="Burnt out on posting with no traction">Burnt out on posting with no traction</option>
                        <option value="Tired of low-ticket clients">Tired of low-ticket clients</option>
                        <option value="Afraid of wasting money on ads">Afraid of wasting money on ads</option>
                        <option value="Don’t know where to start">Don’t know where to start</option>
                        <option value="custom">Other (please specify below)</option>
                    </select>
                    <textarea id="pain-custom" class="input-field hidden" placeholder="Enter a custom pain point..." rows="3"></textarea>
                </div>
                
                <!-- Step 4: Emotion -->
                <div id="step-4" class="form-step">
                    <h2 class="text-2xl font-semibold mb-4 text-white">4. What emotion should the hook trigger?</h2>
                    <p class="text-gray-400 mb-6">Select up to two emotions to focus on.</p>
                    <div id="emotion-options" class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                        <button type="button" data-emotion="Shock" class="emotion-btn min-w-[120px] p-4 rounded-lg text-center transition hover:border-amber-500">🤯 Shock</button>
                        <button type="button" data-emotion="Fear" class="emotion-btn min-w-[120px] p-4 rounded-lg text-center transition hover:border-amber-500">😨 Fear</button>
                        <button type="button" data-emotion="Desire" class="emotion-btn min-w-[120px] p-4 rounded-lg text-center transition hover:border-amber-500">😍 Desire</button>
                        <button type="button" data-emotion="Curiosity" class="emotion-btn min-w-[120px] p-4 rounded-lg text-center transition hover:border-amber-500">🧠 Curiosity</button>
                        <button type="button" data-emotion="Urgency" class="emotion-btn min-w-[120px] p-4 rounded-lg text-center transition hover:border-amber-500">🚨 Urgency</button>
                    </div>
                    <div id="live-hook-preview-container" class="mt-6 hidden">
                        <h3 class="text-sm font-semibold text-gray-400 mb-2">Live Sample:</h3>
                        <div id="live-hook-preview" class="p-4 rounded text-md italic"></div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-8">
                    <button type="button" id="prev-btn" class="py-2 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>Previous</button>
                    <button type="button" id="next-btn" class="py-2 px-6 rounded-lg transition">Next</button>
                    <button type="submit" id="submit-btn" class="py-2 px-6 rounded-lg transition hidden">Generate Hooks</button>
                </div>
            </form>

            <!-- Results Section -->
            <div id="results-container" class="hidden mt-12">
                <div class="text-center">
                    <h2 class="text-3xl font-bold mb-4 text-white">Your Generated Hooks</h2>
                    <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-4">
                        <button id="generate-more-btn" class="cta-btn text-sm">🔁 Generate More</button>
                        <button id="copy-all-btn" class="cta-btn text-sm">📋 Copy All</button>
                        <button id="download-hooks-btn" class="cta-btn text-sm">⬇️ Download .txt</button>
                        <button id="download-pdf-btn" class="cta-btn text-sm">📄 Save as PDF</button>
                    </div>
                     <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
                        <button id="ab-test-export-btn" class="cta-btn text-sm">🧪 A/B Test Export</button>
                    </div>
                </div>
                
                <!-- Favorites Section -->
                <div id="favorites-container" class="mb-10 hidden">
                    <h3 class="text-2xl font-bold mb-4 text-white text-center">⭐ Your Favorites</h3>
                    <div id="favorites-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
                    <div class="text-center mt-4">
                        <button id="copy-favorites-btn" class="cta-btn text-sm">📋 Copy Favorites</button>
                    </div>
                </div>

                <div id="hooks-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Hooks will be injected here -->
                </div>
                 <div class="text-center mt-8">
                    <button id="start-over-btn" class="cta-btn">Start Over</button>
                </div>
            </div>

        </div>
    </main>
    
    <footer class="main-footer">
        <p>&copy; 2025 ReuxMarketing. All Rights Reserved. Built to help you grow.</p>
    </footer>

    <script>
        // PASTE THE ENTIRE JAVASCRIPT LOGIC OF THE ORIGINAL TOOL HERE
        // Make jsPDF available globally
        const { jsPDF } = window.jspdf;

        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const form = document.getElementById('hook-form');
            const allInputs = form.querySelectorAll('input, select, textarea');
            const steps = Array.from(document.querySelectorAll('.form-step'));
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const painSelect = document.getElementById('pain-select');
            const painCustom = document.getElementById('pain-custom');
            const emotionOptions = document.getElementById('emotion-options');
            const resultsContainer = document.getElementById('results-container');
            const hooksGrid = document.getElementById('hooks-grid');
            const startOverBtn = document.getElementById('start-over-btn');
            const progressContainer = document.getElementById('progress-container');
            const liveHookPreview = document.getElementById('live-hook-preview');
            const liveHookPreviewContainer = document.getElementById('live-hook-preview-container');
            const copyAllBtn = document.getElementById('copy-all-btn');
            const downloadHooksBtn = document.getElementById('download-hooks-btn');
            const downloadPdfBtn = document.getElementById('download-pdf-btn');
            const generateMoreBtn = document.getElementById('generate-more-btn');
            const abTestExportBtn = document.getElementById('ab-test-export-btn');
            const favoritesContainer = document.getElementById('favorites-container');
            const favoritesGrid = document.getElementById('favorites-grid');
            const copyFavoritesBtn = document.getElementById('copy-favorites-btn');

            // --- State ---
            let currentStep = 0;
            const totalSteps = steps.length;
            let selectedEmotions = [];
            let generatedHooksCache = [];
            let favoriteHooks = [];

            // --- Internal Hook Library (unchanged) ---
            const hookLibrary = [
                // General & Curiosity
                { id: 1, type: 'Hormozi', text: 'Why 93% of [audience] fail at [pain] (and what to do instead).', keywords: ['general'], emotion: 'Curiosity' },
                { id: 2, type: 'Curiosity', text: 'The $0 tactic for [audience] that 7-figure brands don’t want you to know.', keywords: ['business', 'marketing'], emotion: 'Curiosity' },
                { id: 3, type: 'Question', text: 'What if your next 10 clients came from this one simple change for [audience]?', keywords: ['clients', 'sales', 'service'], emotion: 'Curiosity' },
                { id: 4, type: 'Shock', text: 'I just used this to solve [pain]. Here’s the part that no one talks about.', keywords: ['general'], emotion: 'Shock' },
                { id: 5, type: 'Listicle', text: '3 brutal lessons I learned about [pain] so you don\'t have to.', keywords: ['general'], emotion: 'Curiosity' },
                { id: 6, type: 'Direct CTA', text: 'Don’t even think about launching your [product] until you fix this.', keywords: ['product', 'launch'], emotion: 'Urgency' },
                { id: 7, type: 'Fear', text: 'The #1 reason most [audience] are still struggling with [pain].', keywords: ['struggle', 'fail'], emotion: 'Fear' },
                { id: 8, type: 'Desire', text: 'Imagine finally overcoming [pain] and achieving your dreams with our [product].', keywords: ['dreams', 'goals'], emotion: 'Desire' },
                { id: 9, type: 'Question', text: 'Are you making this common mistake as a [audience]?', keywords: ['mistake'], emotion: 'Fear' },
                { id: 10, type: 'Curiosity', text: 'The truth about getting results with [product].', keywords: ['truth', 'results'], emotion: 'Curiosity' },
                { id: 11, type: 'Shock', text: 'This is why you\'re failing to solve [pain].', keywords: ['fail', 'problem'], emotion: 'Shock' },
                { id: 12, type: 'Urgency', text: 'Stop wasting time with [pain]. Do this instead.', keywords: ['time', 'waste'], emotion: 'Urgency' },
                { id: 13, type: 'Hormozi', text: 'How [audience] can get [desired_outcome] without [pain].', keywords: ['coach', 'creator', 'founder'], emotion: 'Desire' },
                { id: 14, type: 'Question', text: 'As a [audience], do you feel like you\'re just spinning your wheels?', keywords: ['coach', 'creator', 'founder'], emotion: 'Fear' },
                { id: 15, type: 'Listicle', text: '5 ways to beat "[pain]" once and for all.', keywords: ['views', 'sales', 'burnout', 'clients', 'ads'], emotion: 'Desire' },
                { id: 16, type: 'Fear', text: 'Warning: [pain] is costing you more than you think.', keywords: ['money', 'ads', 'sales'], emotion: 'Fear' },
                { id: 17, type: 'Curiosity', text: 'The hidden cause of [pain] for most [audience].', keywords: ['views', 'sales', 'burnout'], emotion: 'Curiosity' },
                { id: 18, type: 'Direct CTA', text: 'Your [audience] need this [product]. Here\'s how to sell it.', keywords: ['course', 'program', 'software'], emotion: 'Desire' },
                { id: 19, type: 'Question', text: 'Is your [product] solving the right problem for [audience]?', keywords: ['software', 'service'], emotion: 'Curiosity' },
                { id: 20, type: 'Urgency', text: 'The last [product] you\'ll ever need to fix [pain].', keywords: ['course', 'program', 'coaching'], emotion: 'Urgency' },
                { id: 21, type: 'Hormozi', text: 'The only skill you need to escape the [pain] trap as a [audience].', keywords: ['general'], emotion: 'Desire' },
                { id: 22, type: 'Curiosity', text: 'A single sentence that will get you more clients than your entire website.', keywords: ['clients', 'sales'], emotion: 'Curiosity' },
                { id: 23, type: 'Shock', text: 'I stopped doing this one thing and my sales tripled.', keywords: ['sales'], emotion: 'Shock' },
                { id: 24, type: 'Listicle', text: '7 things I wish I knew before becoming a [audience].', keywords: ['creator', 'coach', 'founder'], emotion: 'Curiosity' },
                { id: 25, type: 'Question', text: 'What if [pain] was a choice?', keywords: ['general'], emotion: 'Curiosity' },
                { id: 26, type: 'Fear', text: 'The silent killer of dreams for [audience].', keywords: ['general'], emotion: 'Fear' },
                { id: 27, type: 'Desire', text: 'The secret to effortless growth for [audience].', keywords: ['growth', 'sales', 'views'], emotion: 'Desire' },
                { id: 28, type: 'Social Proof', text: 'How [audience] like you are getting incredible results with [product].', keywords: ['results', 'case study'], emotion: 'Desire' },
                { id: 29, type: 'Us vs. Them', text: 'What the "gurus" won\'t tell you about fixing [pain].', keywords: ['gurus', 'experts'], emotion: 'Curiosity' },
                { id: 30, type: 'Problem/Agitate', text: 'Still dealing with [pain]? It\'s probably worse than you think.', keywords: ['problem', 'pain'], emotion: 'Fear' },
                { id: 31, type: 'Before/After', text: 'From [pain] to total freedom. Here\'s how.', keywords: ['transformation', 'results'], emotion: 'Desire' },
                { id: 32, type: 'Shock', text: 'You\'re flushing money down the toilet if you ignore this.', keywords: ['money', 'ads'], emotion: 'Fear' },
                { id: 33, type: 'Question', text: 'If you\'re a [audience] and not doing this, you\'re falling behind.', keywords: ['coach', 'creator', 'founder'], emotion: 'Urgency' },
                { id: 34, type: 'Curiosity', text: 'The counter-intuitive method to finally solve [pain].', keywords: ['method', 'strategy'], emotion: 'Curiosity' },
                { id: 35, type: 'Direct CTA', text: 'For [audience] who are serious about results.', keywords: ['results', 'serious'], emotion: 'Desire' },
                { id: 36, type: 'Hormozi', text: 'I made this for [audience] who are tired of [pain].', keywords: ['general'], emotion: 'Desire' },
                { id: 37, type: 'Listicle', text: 'The top 5 myths about [pain] that are holding you back.', keywords: ['myths', 'mistakes'], emotion: 'Curiosity' },
                { id: 38, type: 'Fear', text: 'The deadline for [audience] to act is approaching. Don\'t get left behind.', keywords: ['deadline', 'time'], emotion: 'Urgency' },
                { id: 39, type: 'Shock', text: 'Everything you\'ve been told about solving [pain] is wrong.', keywords: ['wrong', 'truth'], emotion: 'Shock' },
                { id: 40, type: 'Question', text: 'Do you have 5 minutes to learn the secret to beating [pain]?', keywords: ['secret', 'time'], emotion: 'Curiosity' },
                { id: 41, type: 'Desire', text: 'The shortcut to achieving your goals as a [audience].', keywords: ['shortcut', 'goals'], emotion: 'Desire' },
                { id: 42, type: 'Urgency', text: 'This opportunity for [audience] disappears in 24 hours.', keywords: ['opportunity', 'time'], emotion: 'Urgency' },
                { id: 43, type: 'Social Proof', text: 'Join over 1,000 [audience] who have transformed their lives with [product].', keywords: ['join', 'community'], emotion: 'Desire' },
                { id: 44, type: 'Us vs. Them', text: 'They laugh at [audience] who try this... until they see the results.', keywords: ['results'], emotion: 'Shock' },
                { id: 45, type: 'Problem/Agitate', text: 'The longer you ignore [pain], the harder it gets to fix.', keywords: ['problem', 'pain'], emotion: 'Fear' },
                { id: 46, type: 'Before/After', text: 'A year ago I was struggling with [pain]. Today, my life is completely different.', keywords: ['struggle', 'transformation'], emotion: 'Desire' },
                { id: 47, type: 'Hormozi', text: 'Get [desired_outcome] in half the time, without the usual [pain].', keywords: ['time', 'results'], emotion: 'Desire' },
                { id: 48, type: 'Curiosity', text: 'The one belief that separates successful [audience] from everyone else.', keywords: ['belief', 'mindset'], emotion: 'Curiosity' },
                { id: 49, type: 'Fear', text: 'Are you on the path to failure? 3 warning signs for [audience].', keywords: ['fail', 'warning'], emotion: 'Fear' },
                { id: 50, type: 'Direct CTA', text: 'If you\'re a [audience], you need to see this.', keywords: ['general'], emotion: 'Urgency' },
                { id: 51, type: 'Question', text: 'What would you do with an extra 10 hours per week? This [product] makes it possible.', keywords: ['time', 'software', 'service'], emotion: 'Desire' }
            ];

            // --- Core Functions ---
            const updateStepUI = () => {
                steps.forEach((step, index) => step.classList.toggle('form-step-active', index === currentStep));
                const progress = ((currentStep + 1) / totalSteps) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `Step ${currentStep + 1} of ${totalSteps}`;
                prevBtn.disabled = currentStep === 0;
                nextBtn.classList.toggle('hidden', currentStep === totalSteps - 1);
                submitBtn.classList.toggle('hidden', currentStep !== totalSteps - 1);
                if (currentStep === 3) updateLivePreview();
                else liveHookPreviewContainer.classList.add('hidden');
            };

            const validateStep = () => {
                clearErrors();
                const currentInputs = steps[currentStep].querySelectorAll('input, select, textarea');
                for (const input of currentInputs) {
                    // Skip validating the custom textarea if it's not the selected option
                    if (input.id === 'pain-custom' && painSelect.value !== 'custom') {
                        continue;
                    }

                    // Validate text inputs and textareas
                    if ((input.tagName === 'INPUT' && input.type === 'text') || input.tagName === 'TEXTAREA') {
                        if (!input.value.trim()) {
                            return showError(input, 'This field is required.');
                        }
                    }

                    // Validate select dropdown
                    if (input.tagName === 'SELECT' && !input.value) {
                        return showError(input, 'Please make a selection.');
                    }
                }
                if (currentStep === 3 && selectedEmotions.length === 0) {
                    return showError(emotionOptions, 'Please select at least one emotion.');
                }
                return true;
            };

            const generateHooks = (data, shuffle = false) => {
                const { product, audience, pain, emotions } = data;
                if (!product || !audience || !pain) return [];

                const library = shuffle ? [...hookLibrary].sort(() => Math.random() - 0.5) : [...hookLibrary];
                const inputKeywords = `${product} ${audience} ${pain}`.toLowerCase().split(/\s+/);

                let scoredHooks = library.map(hook => {
                    let score = 0;
                    if (emotions.length > 0 && emotions.includes(hook.emotion)) score += 5;
                    hook.keywords.forEach(kw => { if (inputKeywords.includes(kw)) score += 2; });
                    if (hook.keywords.includes('general')) score += 1;
                    return { ...hook, score };
                });

                if (emotions.length > 0) scoredHooks = scoredHooks.filter(h => h.score > 0);
                scoredHooks.sort((a, b) => b.score - a.score);
                const uniqueHooks = [...new Map(scoredHooks.map(item => [item.id, item])).values()];
                const selectedHooks = uniqueHooks.slice(0, 10);

                return selectedHooks.map(hook => {
                    const personalizedText = hook.text
                        .replace(/\[product\]/g, product.toLowerCase())
                        .replace(/\[audience\]/g, audience.toLowerCase())
                        .replace(/\[pain\]/g, pain.toLowerCase())
                        .replace(/\[desired_outcome\]/g, 'your desired outcome');
                    return { ...hook, text: personalizedText, isFavorite: favoriteHooks.some(fav => fav.id === hook.id) };
                });
            };

            const displayHooks = (hooks, targetGrid) => {
                targetGrid.innerHTML = '';
                if (hooks.length === 0 && targetGrid.id === 'hooks-grid') {
                    targetGrid.innerHTML = `<p class="text-center text-gray-600 md:col-span-2">No hooks matched. Try more general terms.</p>`;
                    return;
                }
                hooks.forEach((hook, index) => {
                    const card = document.createElement('div');
                    card.className = 'hook-card p-5 rounded-lg shadow-md flex flex-col fade-in';
                    card.style.animationDelay = `${index * 50}ms`;
                    card.dataset.hookId = hook.id;

                    // Updated badgeColors to use ReuxMarketing style guide colors
                    const badgeColors = { 
                        'Curiosity': 'badge-blue-100', 
                        'Hormozi': 'badge-purple-100', 
                        'Shock': 'badge-yellow-100', 
                        'Fear': 'badge-red-100', 
                        'Desire': 'badge-pink-100', 
                        'Urgency': 'badge-orange-100', 
                        'Question': 'badge-indigo-100', 
                        'Listicle': 'badge-green-100', 
                        'Social Proof': 'badge-teal-100', 
                        'Us vs. Them': 'badge-gray-200', 
                        'Problem/Agitate': 'badge-red-200', 
                        'Before/After': 'badge-lime-100', 
                        'Direct CTA': 'badge-cyan-100' 
                    };

                    card.innerHTML = `
                        <div class="flex-grow">
                            <div class="flex justify-between items-start mb-3">
                                <span class="text-xs font-semibold px-2.5 py-0.5 rounded-full ${badgeColors[hook.type] || 'bg-gray-700 text-gray-300'}">${hook.type}</span>
                                <span class="favorite-star text-gray-400 ${hook.isFavorite ? 'favorited' : ''}" title="Add to favorites">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg>
                                </span>
                            </div>
                            <textarea class="editable-hook text-lg mb-4" rows="1">${hook.text}</textarea>
                        </div>
                        <div class="flex items-center justify-end mt-auto pt-4 border-t border-gray-700">
                            <button class="copy-btn bg-gray-700 text-gray-300 text-sm font-medium py-1 px-3 rounded-md hover:bg-gray-600 transition">Copy</button>
                        </div>`;
                    targetGrid.appendChild(card);
                    const textarea = card.querySelector('.editable-hook');
                    adjustTextareaHeight(textarea);
                    textarea.addEventListener('input', () => adjustTextareaHeight(textarea));
                });
            };
            
            const displayFavorites = () => {
                if (favoriteHooks.length > 0) {
                    favoritesContainer.classList.remove('hidden');
                    displayHooks(favoriteHooks, favoritesGrid);
                } else {
                    favoritesContainer.classList.add('hidden');
                }
            };

            const updateLivePreview = () => {
                const formData = getFormData();
                if (!formData.product || !formData.audience || !formData.pain || selectedEmotions.length === 0) {
                    liveHookPreviewContainer.classList.add('hidden');
                    return;
                }
                const previewHooks = generateHooks(formData);
                if (previewHooks.length > 0) {
                    liveHookPreview.innerText = previewHooks[0].text;
                    liveHookPreviewContainer.classList.remove('hidden');
                } else {
                    liveHookPreviewContainer.classList.add('hidden');
                }
            };
            
            // --- LocalStorage & State Management ---
            const getFormData = () => ({
                product: document.getElementById('product').value,
                audience: document.getElementById('audience').value,
                pain: painSelect.value === 'custom' ? painCustom.value : painSelect.value,
                emotions: selectedEmotions
            });

            const saveState = () => {
                const state = {
                    currentStep,
                    product: document.getElementById('product').value,
                    audience: document.getElementById('audience').value,
                    painSelect: painSelect.value,
                    painCustom: painCustom.value,
                    selectedEmotions,
                    favoriteHooks
                };
                localStorage.setItem('hookGeneratorState', JSON.stringify(state));
            };

            const loadState = () => {
                const savedState = localStorage.getItem('hookGeneratorState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    currentStep = state.currentStep || 0;
                    document.getElementById('product').value = state.product || '';
                    document.getElementById('audience').value = state.audience || '';
                    painSelect.value = state.painSelect || '';
                    painCustom.value = state.painCustom || '';
                    painCustom.classList.toggle('hidden', painSelect.value !== 'custom');
                    selectedEmotions = state.selectedEmotions || [];
                    favoriteHooks = state.favoriteHooks || [];

                    document.querySelectorAll('.emotion-btn').forEach(btn => {
                        if (selectedEmotions.includes(btn.dataset.emotion)) {
                            btn.classList.add('bg-amber-100', 'border-amber-500');
                        }
                    });
                    updateStepUI();
                }
            };
            
            // --- UI Helpers ---
            const showError = (element, message) => {
                clearErrors();
                const errorEl = document.createElement('p');
                errorEl.className = 'text-red-500 text-sm mt-2 error-message';
                errorEl.textContent = message;
                element.parentElement.appendChild(errorEl);
                element.classList.add('border-red-500');
                return false;
            };

            const clearErrors = () => {
                document.querySelectorAll('.error-message').forEach(el => el.remove());
                document.querySelectorAll('.border-red-500').forEach(el => el.classList.remove('border-red-500'));
            };

            const showToast = (message) => {
                const toast = document.createElement('div');
                toast.className = 'toast-notification fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-5 py-3 rounded-lg shadow-lg z-50';
                toast.innerText = message;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
            };
            
            const adjustTextareaHeight = (el) => {
                el.style.height = 'auto';
                el.style.height = (el.scrollHeight) + 'px';
            };

            // --- Event Listeners ---
            nextBtn.addEventListener('click', () => { if (validateStep()) { currentStep++; updateStepUI(); saveState(); } });
            prevBtn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; updateStepUI(); saveState(); } });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                // Validate all steps before submitting
                for (let i = 0; i < totalSteps; i++) {
                    const tempStep = currentStep;
                    currentStep = i;
                    const isStepValid = validateStep();
                    currentStep = tempStep; // Restore current step
                    
                    if (!isStepValid) {
                        currentStep = i;
                        updateStepUI();
                        return;
                    }
                }

                const formData = getFormData();
                generatedHooksCache = generateHooks(formData);
                displayHooks(generatedHooksCache, hooksGrid);
                displayFavorites();
                form.classList.add('hidden');
                progressContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
                saveState();
            });

            allInputs.forEach(input => {
                input.addEventListener('input', saveState);
                input.addEventListener('change', saveState);
            });

            emotionOptions.addEventListener('click', (e) => {
                const btn = e.target.closest('.emotion-btn');
                if (!btn) return;
                const emotion = btn.dataset.emotion;
                btn.classList.toggle('bg-amber-100');
                btn.classList.toggle('border-amber-500');
                if (selectedEmotions.includes(emotion)) {
                    selectedEmotions = selectedEmotions.filter(em => em !== emotion);
                } else if (selectedEmotions.length < 2) {
                    selectedEmotions.push(emotion);
                } else {
                    btn.classList.remove('bg-amber-100', 'border-amber-500');
                }
                if (document.querySelector('.error-message')) validateStep();
                updateLivePreview();
                saveState();
            });

            const handleFavoriteClick = (e) => {
                const star = e.target.closest('.favorite-star');
                if (!star) return;
                const card = star.closest('.hook-card');
                const hookId = parseInt(card.dataset.hookId);
                const hookText = card.querySelector('.editable-hook').value;
                const hookType = card.querySelector('span').textContent;

                const isFavorited = favoriteHooks.some(h => h.id === hookId);
                if (isFavorited) {
                    favoriteHooks = favoriteHooks.filter(h => h.id !== hookId);
                    star.classList.remove('favorited');
                } else {
                    favoriteHooks.push({ id: hookId, text: hookText, type: hookType, isFavorite: true });
                    star.classList.add('favorited');
                }
                displayFavorites();
                saveState();
            };
            hooksGrid.addEventListener('click', handleFavoriteClick);
            favoritesGrid.addEventListener('click', handleFavoriteClick);

            const handleCopyClick = (e) => {
                if (e.target.classList.contains('copy-btn')) {
                    const card = e.target.closest('.hook-card');
                    const textToCopy = card.querySelector('.editable-hook').value;
                    navigator.clipboard.writeText(textToCopy).then(() => showToast('✅ Hook copied to clipboard!'));
                }
            };
            hooksGrid.addEventListener('click', handleCopyClick);
            favoritesGrid.addEventListener('click', handleCopyClick);
            
            copyAllBtn.addEventListener('click', () => {
                const allHooksText = Array.from(hooksGrid.querySelectorAll('.editable-hook')).map(h => h.value).join('\n\n');
                navigator.clipboard.writeText(allHooksText).then(() => showToast('✅ All hooks copied!'));
            });
            
            copyFavoritesBtn.addEventListener('click', () => {
                const favHooksText = favoriteHooks.map(h => h.text).join('\n\n');
                navigator.clipboard.writeText(favHooksText).then(() => showToast('✅ Favorites copied!'));
            });

            downloadHooksBtn.addEventListener('click', () => {
                const allHooksText = Array.from(hooksGrid.querySelectorAll('.editable-hook')).map(h => h.value).join('\r\n\r\n');
                const blob = new Blob([allHooksText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url; a.download = 'generated_hooks.txt';
                document.body.appendChild(a); a.click(); document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showToast('⬇️ Downloading hooks...');
            });

            downloadPdfBtn.addEventListener('click', () => {
                const doc = new jsPDF();
                const hooks = Array.from(hooksGrid.querySelectorAll('.editable-hook')).map(h => h.value);
                doc.setFontSize(18);
                doc.text("Generated Hooks", 10, 15);
                doc.setFontSize(11);
                doc.text(hooks.join('\n\n'), 10, 25);
                doc.save('generated-hooks.pdf');
                showToast('⬇️ Downloading PDF...');
            });

            generateMoreBtn.addEventListener('click', () => {
                const formData = getFormData();
                generatedHooksCache = generateHooks(formData, true); // Shuffle
                displayHooks(generatedHooksCache, hooksGrid);
                showToast('🔁 New hooks generated!');
            });
            
            abTestExportBtn.addEventListener('click', () => {
                const hooks = Array.from(hooksGrid.querySelectorAll('.editable-hook')).map(h => h.value);
                if (hooks.length < 2) {
                    showToast('⚠️ Need at least 2 hooks for A/B test export.');
                    return;
                }
                const abText = hooks.map((hook, index) => `Hook ${String.fromCharCode(65 + index)}:\n${hook}`).join('\n\n---\n\n');
                navigator.clipboard.writeText(abText).then(() => showToast('🧪 A/B test copied!'));
            });

            startOverBtn.addEventListener('click', () => {
                localStorage.removeItem('hookGeneratorState');
                form.reset();
                currentStep = 0;
                selectedEmotions = [];
                generatedHooksCache = [];
                favoriteHooks = [];
                painCustom.classList.add('hidden');
                document.querySelectorAll('.emotion-btn').forEach(btn => btn.classList.remove('bg-amber-100', 'border-amber-500'));
                resultsContainer.classList.add('hidden');
                favoritesContainer.classList.add('hidden');
                form.classList.remove('hidden');
                progressContainer.classList.remove('hidden');
                updateStepUI();
                clearErrors();
            });

            // --- Initial Load ---
            loadState();
        });
    </script>
    
</body>
</html>
